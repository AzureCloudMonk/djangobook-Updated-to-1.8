<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Appendix C: Generic View Reference &mdash; Mastering Django</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Mastering Django" href="index.html" />
    <link rel="next" title="Appendix D: Settings" href="appendix_D.html" />
    <link rel="prev" title="Appendix B: Database API Reference" href="appendix_B.html" /> 
  </head>
  <body role="document">
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">Mastering Django</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="appendix_B.html" title="Appendix B: Database API Reference"
             accesskey="P">previous</a> |
          <a href="appendix_D.html" title="Appendix D: Settings"
             accesskey="N">next</a> |
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="appendix-c-generic-view-reference">
<h1>Appendix C: Generic View Reference<a class="headerlink" href="#appendix-c-generic-view-reference" title="Permalink to this headline">¶</a></h1>
<p>Chapter 10 introduced generic views but leaves out some of the gory details.
This appendix describes each generic view along with all the options each view can
take. Be sure to read Chapter 10 before trying to understand the reference
material that follows. You might want to refer back to the <code class="docutils literal"><span class="pre">Book</span></code>,
<code class="docutils literal"><span class="pre">Publisher</span></code>, and <code class="docutils literal"><span class="pre">Author</span></code> objects defined in that chapter; the examples that
follow use these models.</p>
<div class="section" id="common-arguments-to-generic-views">
<h2>Common Arguments to Generic Views<a class="headerlink" href="#common-arguments-to-generic-views" title="Permalink to this headline">¶</a></h2>
<p>Most of these views take a large number of arguments that can change the generic
view&#8217;s behavior. Many of these arguments work the same across a large number of
views. Table C-1 describes each of these common arguments; anytime you see one
of these arguments in a generic view&#8217;s argument list, it will work as described in
the table.</p>
<table border="1" class="docutils" id="id3">
<caption><span class="caption-text">Table C-1. Common Arguments to Generic Views</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">allow_empty</span></code></td>
<td>A Boolean specifying whether to display the
page if no objects are available. If this is
<code class="docutils literal"><span class="pre">False</span></code> and no objects are available, the view
will raise a 404 error instead of displaying an
empty page. By default, this is <code class="docutils literal"><span class="pre">True</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">context_processors</span></code></td>
<td>A list of additional template-context processors
(besides the defaults) to apply to the view&#8217;s
template. See Chapter 9 for information on
template context processors.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">extra_context</span></code></td>
<td>A dictionary of values to add to the template
context. By default, this is an empty
dictionary. If a value in the dictionary is
callable, the generic view will call it just
before rendering the template.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">mimetype</span></code></td>
<td>The MIME type to use for the resulting
document. It defaults to the value of the
<code class="docutils literal"><span class="pre">DEFAULT_MIME_TYPE</span></code> setting, which is
<code class="docutils literal"><span class="pre">text/html</span></code> if you haven&#8217;t changed it.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">queryset</span></code></td>
<td>A <code class="docutils literal"><span class="pre">QuerySet</span></code> (i.e., something like
<code class="docutils literal"><span class="pre">Author.objects.all()</span></code>) to read objects from.
See Appendix B for more information about
<code class="docutils literal"><span class="pre">QuerySet</span></code> objects. Most generic views require
this argument.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">template_loader</span></code></td>
<td>The template loader to use when loading the
template. By default, it&#8217;s
<code class="docutils literal"><span class="pre">django.template.loader</span></code>. See Chapter 9 for
information on template loaders.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">template_name</span></code></td>
<td>The full name of a template to use in rendering
the page. This lets you override the default
template name derived from the <code class="docutils literal"><span class="pre">QuerySet</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">template_object_name</span></code></td>
<td>The name of the template variable to
use in the template context. By default, this is
<code class="docutils literal"><span class="pre">'object'</span></code>. Views that list more than one
object (i.e., <code class="docutils literal"><span class="pre">object_list</span></code> views and various
objects-for-date views) will append <code class="docutils literal"><span class="pre">'_list'</span></code>
to the value of this parameter.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="simple-generic-views">
<h2>&#8220;Simple&#8221; Generic Views<a class="headerlink" href="#simple-generic-views" title="Permalink to this headline">¶</a></h2>
<p>The module``django.views.generic.base`` contains simple views that handle a
couple of common cases: rendering a template when no view logic is needed and
issuing a redirect.</p>
<div class="section" id="rendering-a-template">
<h3>Rendering a Template<a class="headerlink" href="#rendering-a-template" title="Permalink to this headline">¶</a></h3>
<p><em>View function</em>: <code class="docutils literal"><span class="pre">django.views.generic.base.TemplateView</span></code></p>
<p>This view renders a given template, passing it a context with keyword
arguments captured in the URL.</p>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>Given the following URLconf:</p>
<div class="highlight-python"><div class="highlight"><pre>from django.conf.urls import url

    from myapp.views import HomePageView

    urlpatterns = [
        url(r&#39;^$&#39;, HomePageView.as_view(), name=&#39;home&#39;),
    ]
</pre></div>
</div>
<p>An a sample views.py:</p>
<div class="highlight-python"><div class="highlight"><pre>from django.views.generic.base import TemplateView

       from articles.models import Article

       class HomePageView(TemplateView):

           template_name = &quot;home.html&quot;

           def get_context_data(self, **kwargs):
               context = super(HomePageView, self).get_context_data(**kwargs)
               context[&#39;latest_articles&#39;] = Article.objects.all()[:5]
               return context
</pre></div>
</div>
<p>a request to <code class="docutils literal"><span class="pre">/</span></code> would render the template <code class="docutils literal"><span class="pre">home.html</span></code>, returning a
context containing a list of the top 5 articles.</p>
</div>
</div>
<div class="section" id="redirecting-to-another-url">
<h3>Redirecting to Another URL<a class="headerlink" href="#redirecting-to-another-url" title="Permalink to this headline">¶</a></h3>
<p><em>View function</em>: <code class="docutils literal"><span class="pre">django.views.generic.base.RedirectView</span></code></p>
<p>Redirects to a given URL.</p>
<p>The given URL may contain dictionary-style string formatting, which will be
interpolated against the parameters captured in the URL. Because keyword
interpolation is <em>always</em> done (even if no arguments are passed in), any
<code class="docutils literal"><span class="pre">&quot;%&quot;</span></code> characters in the URL must be written as <code class="docutils literal"><span class="pre">&quot;%%&quot;</span></code> so that Python
will convert them to a single percent sign on output.</p>
<p>If the given URL is <code class="docutils literal"><span class="pre">None</span></code>, Django will return an <code class="docutils literal"><span class="pre">HttpResponseGone</span></code>
(410).</p>
<p><strong>Example views.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">get_object_or_404</span>
<span class="kn">from</span> <span class="nn">django.views.generic.base</span> <span class="kn">import</span> <span class="n">RedirectView</span>

<span class="kn">from</span> <span class="nn">articles.models</span> <span class="kn">import</span> <span class="n">Article</span>

<span class="k">class</span> <span class="nc">ArticleCounterRedirectView</span><span class="p">(</span><span class="n">RedirectView</span><span class="p">):</span>

    <span class="n">permanent</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">query_string</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">pattern_name</span> <span class="o">=</span> <span class="s">&#39;article-detail&#39;</span>

    <span class="k">def</span> <span class="nf">get_redirect_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">article</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Article</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;pk&#39;</span><span class="p">])</span>
        <span class="n">article</span><span class="o">.</span><span class="n">update_counter</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ArticleCounterRedirectView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_redirect_url</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Example urls.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.views.generic.base</span> <span class="kn">import</span> <span class="n">RedirectView</span>

<span class="kn">from</span> <span class="nn">article.views</span> <span class="kn">import</span> <span class="n">ArticleCounterRedirectView</span><span class="p">,</span> <span class="n">ArticleDetail</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^counter/(?P&lt;pk&gt;[0-9]+)/$&#39;</span><span class="p">,</span> <span class="n">ArticleCounterRedirectView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;article-counter&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^details/(?P&lt;pk&gt;[0-9]+)/$&#39;</span><span class="p">,</span> <span class="n">ArticleDetail</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;article-detail&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^go-to-django/$&#39;</span><span class="p">,</span> <span class="n">RedirectView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s">&#39;http://djangoproject.com&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;go-to-django&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>Attributes</strong></p>
<dl class="attribute">
<dt id="url">
<code class="descname">url</code><a class="headerlink" href="#url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL to redirect to, as a string. Or <code class="docutils literal"><span class="pre">None</span></code> to raise a 410 (Gone)
HTTP error.</p>
</dd></dl>

<dl class="attribute">
<dt id="pattern_name">
<code class="descname">pattern_name</code><a class="headerlink" href="#pattern_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the URL pattern to redirect to. Reversing will be done
using the same args and kwargs as are passed in for this view.</p>
</dd></dl>

<dl class="attribute">
<dt id="permanent">
<code class="descname">permanent</code><a class="headerlink" href="#permanent" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the redirect should be permanent. The only difference here is
the HTTP status code returned. If <code class="docutils literal"><span class="pre">True</span></code>, then the redirect will use
status code 301. If <code class="docutils literal"><span class="pre">False</span></code>, then the redirect will use status code
302. By default, <code class="docutils literal"><span class="pre">permanent</span></code> is <code class="docutils literal"><span class="pre">True</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="query_string">
<code class="descname">query_string</code><a class="headerlink" href="#query_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to pass along the GET query string to the new location. If
<code class="docutils literal"><span class="pre">True</span></code>, then the query string is appended to the URL. If <code class="docutils literal"><span class="pre">False</span></code>,
then the query string is discarded. By default, <code class="docutils literal"><span class="pre">query_string</span></code> is
<code class="docutils literal"><span class="pre">False</span></code>.</p>
</dd></dl>

<p><strong>Methods</strong></p>
<dl class="method">
<dt id="get_redirect_url">
<code class="descname">get_redirect_url</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#get_redirect_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs the target URL for redirection.</p>
<p>The default implementation uses <a class="reference internal" href="#url" title="url"><code class="xref py py-attr docutils literal"><span class="pre">url</span></code></a> as a starting
string and performs expansion of <code class="docutils literal"><span class="pre">%</span></code> named parameters in that string
using the named groups captured in the URL.</p>
<p>If <a class="reference internal" href="#url" title="url"><code class="xref py py-attr docutils literal"><span class="pre">url</span></code></a> is not set, <code class="docutils literal"><span class="pre">get_redirect_url()</span></code> tries to reverse the
<a class="reference internal" href="#pattern_name" title="pattern_name"><code class="xref py py-attr docutils literal"><span class="pre">pattern_name</span></code></a> using what was captured in the URL (both named and
unnamed groups are used).</p>
<p>If requested by <a class="reference internal" href="#query_string" title="query_string"><code class="xref py py-attr docutils literal"><span class="pre">query_string</span></code></a>, it will also append the query
string to the generated URL.
Subclasses may implement any behavior they wish, as long as the method
returns a redirect-ready URL string.</p>
</dd></dl>

</div>
</div>
<div class="section" id="list-detail-generic-views">
<h2>List/Detail Generic Views<a class="headerlink" href="#list-detail-generic-views" title="Permalink to this headline">¶</a></h2>
<p>The list/detail generic views handle the common case of displaying a
list of items at one view and individual &#8220;detail&#8221; views of those items at
another.</p>
<div class="section" id="lists-of-objects">
<h3>Lists of Objects<a class="headerlink" href="#lists-of-objects" title="Permalink to this headline">¶</a></h3>
<p><em>View function</em>: <code class="docutils literal"><span class="pre">django.views.generic.list.ListView</span></code></p>
<p>Use this view to display a page representing a list of objects.</p>
<div class="section" id="id1">
<h4>Example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p><strong>Example views.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic.list</span> <span class="kn">import</span> <span class="n">ListView</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>

<span class="kn">from</span> <span class="nn">articles.models</span> <span class="kn">import</span> <span class="n">Article</span>

<span class="k">class</span> <span class="nc">ArticleListView</span><span class="p">(</span><span class="n">ListView</span><span class="p">):</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>

    <span class="k">def</span> <span class="nf">get_context_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">context</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">ArticleListView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">context</span><span class="p">[</span><span class="s">&#39;now&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">context</span>
</pre></div>
</div>
<p><strong>Example myapp/urls.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">article.views</span> <span class="kn">import</span> <span class="n">ArticleListView</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">ArticleListView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;article-list&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>Example myapp/article_list.html</strong>:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">object_list</span> <span class="cp">%}</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">article.pub_date</span><span class="o">|</span><span class="nf">date</span> <span class="cp">}}</span> - <span class="cp">{{</span> <span class="nv">article.headline</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">empty</span> <span class="cp">%}</span>
    <span class="nt">&lt;li&gt;</span>No articles yet.<span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="detail-views">
<h3>Detail Views<a class="headerlink" href="#detail-views" title="Permalink to this headline">¶</a></h3>
<p><em>View function</em>: <code class="docutils literal"><span class="pre">django.views.generic.detail.DetailView</span></code></p>
<p>This view provides a &#8220;detail&#8221; view of a single object.</p>
<div class="section" id="id2">
<h4>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p><strong>Example myapp/views.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic.detail</span> <span class="kn">import</span> <span class="n">DetailView</span>
<span class="kn">from</span> <span class="nn">django.utils</span> <span class="kn">import</span> <span class="n">timezone</span>

<span class="kn">from</span> <span class="nn">articles.models</span> <span class="kn">import</span> <span class="n">Article</span>

<span class="k">class</span> <span class="nc">ArticleDetailView</span><span class="p">(</span><span class="n">DetailView</span><span class="p">):</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>

    <span class="k">def</span> <span class="nf">get_context_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">context</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">ArticleDetailView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">context</span><span class="p">[</span><span class="s">&#39;now&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timezone</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">context</span>
</pre></div>
</div>
<p><strong>Example myapp/urls.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">article.views</span> <span class="kn">import</span> <span class="n">ArticleDetailView</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;slug&gt;[-_\w]+)/$&#39;</span><span class="p">,</span> <span class="n">ArticleDetailView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;article-detail&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>Example myapp/article_detail.html</strong>:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">object.headline</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">object.content</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Reporter: <span class="cp">{{</span> <span class="nv">object.reporter</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Published: <span class="cp">{{</span> <span class="nv">object.pub_date</span><span class="o">|</span><span class="nf">date</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Date: <span class="cp">{{</span> <span class="nv">now</span><span class="o">|</span><span class="nf">date</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="module-django.views.generic.dates">
<span id="date-based-generic-views"></span><h2>Date-Based Generic Views<a class="headerlink" href="#module-django.views.generic.dates" title="Permalink to this headline">¶</a></h2>
<p>Date-based generic views, provided in <a class="reference internal" href="#module-django.views.generic.dates" title="django.views.generic.dates"><code class="xref py py-mod docutils literal"><span class="pre">django.views.generic.dates</span></code></a>, are
views for displaying drilldown pages for date-based data.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Some of the examples on this page assume that an <code class="docutils literal"><span class="pre">Article</span></code> model has been
defined as follows in <code class="docutils literal"><span class="pre">myapp/models.py</span></code>:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>

<span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;article-detail&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;pk&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="archiveindexview">
<h3>ArchiveIndexView<a class="headerlink" href="#archiveindexview" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.views.generic.dates.ArchiveIndexView">
<em class="property">class </em><code class="descclassname">django.views.generic.dates.</code><code class="descname">ArchiveIndexView</code><a class="headerlink" href="#django.views.generic.dates.ArchiveIndexView" title="Permalink to this definition">¶</a></dt>
<dd><p>A top-level index page showing the &#8220;latest&#8221; objects, by date. Objects with
a date in the <em>future</em> are not included unless you set <code class="docutils literal"><span class="pre">allow_future</span></code> to
<code class="docutils literal"><span class="pre">True</span></code>.</p>
<p><strong>Context</strong></p>
<p>In addition to the context provided by
<code class="xref py py-class docutils literal"><span class="pre">django.views.generic.list.MultipleObjectMixin</span></code> (via
<code class="xref py py-class docutils literal"><span class="pre">django.views.generic.dates.BaseDateListView</span></code>), the template&#8217;s
context will be:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">date_list</span></code>: A
<code class="xref py py-meth docutils literal"><span class="pre">DateQuerySet</span></code> object
containing all years that have objects available according to
<code class="docutils literal"><span class="pre">queryset</span></code>, represented as
<code class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></code> objects, in
descending order.</li>
</ul>
<p><strong>Notes</strong></p>
<ul class="simple">
<li>Uses a default <code class="docutils literal"><span class="pre">context_object_name</span></code> of <code class="docutils literal"><span class="pre">latest</span></code>.</li>
<li>Uses a default <code class="docutils literal"><span class="pre">template_name_suffix</span></code> of <code class="docutils literal"><span class="pre">_archive</span></code>.</li>
<li>Defaults to providing <code class="docutils literal"><span class="pre">date_list</span></code> by year, but this can be altered to
month or day using the attribute <code class="docutils literal"><span class="pre">date_list_period</span></code>. This also applies
to all subclass views.</li>
</ul>
<p><strong>Example myapp/urls.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.views.generic.dates</span> <span class="kn">import</span> <span class="n">ArchiveIndexView</span>

<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Article</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^archive/$&#39;</span><span class="p">,</span>
        <span class="n">ArchiveIndexView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">Article</span><span class="p">,</span> <span class="n">date_field</span><span class="o">=</span><span class="s">&quot;pub_date&quot;</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s">&quot;article_archive&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>Example myapp/article_archive.html</strong>:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">latest</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">article.pub_date</span> <span class="cp">}}</span>: <span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>This will output all articles.</p>
</dd></dl>

</div>
<div class="section" id="yeararchiveview">
<h3>YearArchiveView<a class="headerlink" href="#yeararchiveview" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.views.generic.dates.YearArchiveView">
<em class="property">class </em><code class="descclassname">django.views.generic.dates.</code><code class="descname">YearArchiveView</code><a class="headerlink" href="#django.views.generic.dates.YearArchiveView" title="Permalink to this definition">¶</a></dt>
<dd><p>A yearly archive page showing all available months in a given year. Objects
with a date in the <em>future</em> are not displayed unless you set
<code class="docutils literal"><span class="pre">allow_future</span></code> to <code class="docutils literal"><span class="pre">True</span></code>.</p>
<dl class="attribute">
<dt id="django.views.generic.dates.YearArchiveView.make_object_list">
<code class="descname">make_object_list</code><a class="headerlink" href="#django.views.generic.dates.YearArchiveView.make_object_list" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean specifying whether to retrieve the full list of objects for
this year and pass those to the template. If <code class="docutils literal"><span class="pre">True</span></code>, the list of
objects will be made available to the context. If <code class="docutils literal"><span class="pre">False</span></code>, the
<code class="docutils literal"><span class="pre">None</span></code> queryset will be used as the object list. By default, this is
<code class="docutils literal"><span class="pre">False</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="django.views.generic.dates.YearArchiveView.get_make_object_list">
<code class="descname">get_make_object_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#django.views.generic.dates.YearArchiveView.get_make_object_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if an object list will be returned as part of the context.
Returns <a class="reference internal" href="#django.views.generic.dates.YearArchiveView.make_object_list" title="django.views.generic.dates.YearArchiveView.make_object_list"><code class="xref py py-attr docutils literal"><span class="pre">make_object_list</span></code></a> by default.</p>
</dd></dl>

<p><strong>Context</strong></p>
<p>In addition to the context provided by
<code class="xref py py-class docutils literal"><span class="pre">django.views.generic.list.MultipleObjectMixin</span></code> (via
<code class="xref py py-class docutils literal"><span class="pre">django.views.generic.dates.BaseDateListView</span></code>), the template&#8217;s
context will be:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">date_list</span></code>: A
<code class="xref py py-meth docutils literal"><span class="pre">DateQuerySet</span></code> object
containing all months that have objects available according to
<code class="docutils literal"><span class="pre">queryset</span></code>, represented as
<code class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></code> objects, in
ascending order.</li>
<li><code class="docutils literal"><span class="pre">year</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the given year.</li>
<li><code class="docutils literal"><span class="pre">next_year</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the first day of the next year, according to
<code class="xref py py-attr docutils literal"><span class="pre">allow_empty</span></code> and
<code class="xref py py-attr docutils literal"><span class="pre">allow_future</span></code>.</li>
<li><code class="docutils literal"><span class="pre">previous_year</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the first day of the previous year, according to
<code class="xref py py-attr docutils literal"><span class="pre">allow_empty</span></code> and
<code class="xref py py-attr docutils literal"><span class="pre">allow_future</span></code>.</li>
</ul>
<p><strong>Notes</strong></p>
<ul class="simple">
<li>Uses a default <code class="docutils literal"><span class="pre">template_name_suffix</span></code> of <code class="docutils literal"><span class="pre">_archive_year</span></code>.</li>
</ul>
<p><strong>Example myapp/views.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic.dates</span> <span class="kn">import</span> <span class="n">YearArchiveView</span>

<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Article</span>

<span class="k">class</span> <span class="nc">ArticleYearArchiveView</span><span class="p">(</span><span class="n">YearArchiveView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">date_field</span> <span class="o">=</span> <span class="s">&quot;pub_date&quot;</span>
    <span class="n">make_object_list</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">allow_future</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p><strong>Example myapp/urls.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">myapp.views</span> <span class="kn">import</span> <span class="n">ArticleYearArchiveView</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;year&gt;[0-9]{4})/$&#39;</span><span class="p">,</span>
        <span class="n">ArticleYearArchiveView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span>
        <span class="n">name</span><span class="o">=</span><span class="s">&quot;article_year_archive&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>Example myapp/article_archive_year.html</strong>:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">date</span> <span class="k">in</span> <span class="nv">date_list</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">date</span><span class="o">|</span><span class="nf">date</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;h1&gt;</span>All Articles for <span class="cp">{{</span> <span class="nv">year</span><span class="o">|</span><span class="nf">date</span><span class="s2">:&quot;Y&quot;</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">obj</span> <span class="k">in</span> <span class="nv">object_list</span> <span class="cp">%}</span>
        <span class="nt">&lt;p&gt;</span>
            <span class="cp">{{</span> <span class="nv">obj.title</span> <span class="cp">}}</span> - <span class="cp">{{</span> <span class="nv">obj.pub_date</span><span class="o">|</span><span class="nf">date</span><span class="s2">:&quot;F j, Y&quot;</span> <span class="cp">}}</span>
        <span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="montharchiveview">
<h3>MonthArchiveView<a class="headerlink" href="#montharchiveview" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.views.generic.dates.MonthArchiveView">
<em class="property">class </em><code class="descclassname">django.views.generic.dates.</code><code class="descname">MonthArchiveView</code><a class="headerlink" href="#django.views.generic.dates.MonthArchiveView" title="Permalink to this definition">¶</a></dt>
<dd><p>A monthly archive page showing all objects in a given month. Objects with a
date in the <em>future</em> are not displayed unless you set <code class="docutils literal"><span class="pre">allow_future</span></code> to
<code class="docutils literal"><span class="pre">True</span></code>.</p>
<p><strong>Context</strong></p>
<p>In addition to the context provided by
<code class="xref py py-class docutils literal"><span class="pre">MultipleObjectMixin</span></code> (via
<code class="xref py py-class docutils literal"><span class="pre">BaseDateListView</span></code>), the template&#8217;s
context will be:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">date_list</span></code>: A
<code class="xref py py-meth docutils literal"><span class="pre">DateQuerySet</span></code> object
containing all days that have objects available in the given month,
according to <code class="docutils literal"><span class="pre">queryset</span></code>, represented as
<code class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></code> objects, in
ascending order.</li>
<li><code class="docutils literal"><span class="pre">month</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the given month.</li>
<li><code class="docutils literal"><span class="pre">next_month</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the first day of the next month, according to
<code class="xref py py-attr docutils literal"><span class="pre">allow_empty</span></code> and
<code class="xref py py-attr docutils literal"><span class="pre">allow_future</span></code>.</li>
<li><code class="docutils literal"><span class="pre">previous_month</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the first day of the previous month, according to
<code class="xref py py-attr docutils literal"><span class="pre">allow_empty</span></code> and
<code class="xref py py-attr docutils literal"><span class="pre">allow_future</span></code>.</li>
</ul>
<p><strong>Notes</strong></p>
<ul class="simple">
<li>Uses a default <code class="docutils literal"><span class="pre">template_name_suffix</span></code> of <code class="docutils literal"><span class="pre">_archive_month</span></code>.</li>
</ul>
<p><strong>Example myapp/views.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic.dates</span> <span class="kn">import</span> <span class="n">MonthArchiveView</span>

<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Article</span>

<span class="k">class</span> <span class="nc">ArticleMonthArchiveView</span><span class="p">(</span><span class="n">MonthArchiveView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">date_field</span> <span class="o">=</span> <span class="s">&quot;pub_date&quot;</span>
    <span class="n">make_object_list</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">allow_future</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p><strong>Example myapp/urls.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">myapp.views</span> <span class="kn">import</span> <span class="n">ArticleMonthArchiveView</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c"># Example: /2012/aug/</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;year&gt;[0-9]{4})/(?P&lt;month&gt;[-\w]+)/$&#39;</span><span class="p">,</span>
        <span class="n">ArticleMonthArchiveView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span>
        <span class="n">name</span><span class="o">=</span><span class="s">&quot;archive_month&quot;</span><span class="p">),</span>
    <span class="c"># Example: /2012/08/</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;year&gt;[0-9]{4})/(?P&lt;month&gt;[0-9]+)/$&#39;</span><span class="p">,</span>
        <span class="n">ArticleMonthArchiveView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="n">month_format</span><span class="o">=</span><span class="s">&#39;%m&#39;</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s">&quot;archive_month_numeric&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>Example myapp/article_archive_month.html</strong>:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">object_list</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">article.pub_date</span><span class="o">|</span><span class="nf">date</span><span class="s2">:&quot;F j, Y&quot;</span> <span class="cp">}}</span>: <span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="nt">&lt;p&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">previous_month</span> <span class="cp">%}</span>
        Previous Month: <span class="cp">{{</span> <span class="nv">previous_month</span><span class="o">|</span><span class="nf">date</span><span class="s2">:&quot;F Y&quot;</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">next_month</span> <span class="cp">%}</span>
        Next Month: <span class="cp">{{</span> <span class="nv">next_month</span><span class="o">|</span><span class="nf">date</span><span class="s2">:&quot;F Y&quot;</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="weekarchiveview">
<h3>WeekArchiveView<a class="headerlink" href="#weekarchiveview" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.views.generic.dates.WeekArchiveView">
<em class="property">class </em><code class="descclassname">django.views.generic.dates.</code><code class="descname">WeekArchiveView</code><a class="headerlink" href="#django.views.generic.dates.WeekArchiveView" title="Permalink to this definition">¶</a></dt>
<dd><p>A weekly archive page showing all objects in a given week. Objects with a
date in the <em>future</em> are not displayed unless you set <code class="docutils literal"><span class="pre">allow_future</span></code> to
<code class="docutils literal"><span class="pre">True</span></code>.</p>
<p><strong>Context</strong></p>
<p>In addition to the context provided by
<code class="xref py py-class docutils literal"><span class="pre">MultipleObjectMixin</span></code> (via
<code class="xref py py-class docutils literal"><span class="pre">BaseDateListView</span></code>), the template&#8217;s
context will be:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">week</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the first day of the given week.</li>
<li><code class="docutils literal"><span class="pre">next_week</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the first day of the next week, according to
<code class="xref py py-attr docutils literal"><span class="pre">allow_empty</span></code> and
<code class="xref py py-attr docutils literal"><span class="pre">allow_future</span></code>.</li>
<li><code class="docutils literal"><span class="pre">previous_week</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the first day of the previous week, according to
<code class="xref py py-attr docutils literal"><span class="pre">allow_empty</span></code> and
<code class="xref py py-attr docutils literal"><span class="pre">allow_future</span></code>.</li>
</ul>
<p><strong>Notes</strong></p>
<ul class="simple">
<li>Uses a default <code class="docutils literal"><span class="pre">template_name_suffix</span></code> of <code class="docutils literal"><span class="pre">_archive_week</span></code>.</li>
</ul>
<p><strong>Example myapp/views.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic.dates</span> <span class="kn">import</span> <span class="n">WeekArchiveView</span>

<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Article</span>

<span class="k">class</span> <span class="nc">ArticleWeekArchiveView</span><span class="p">(</span><span class="n">WeekArchiveView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">date_field</span> <span class="o">=</span> <span class="s">&quot;pub_date&quot;</span>
    <span class="n">make_object_list</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">week_format</span> <span class="o">=</span> <span class="s">&quot;%W&quot;</span>
    <span class="n">allow_future</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p><strong>Example myapp/urls.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">myapp.views</span> <span class="kn">import</span> <span class="n">ArticleWeekArchiveView</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c"># Example: /2012/week/23/</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;year&gt;[0-9]{4})/week/(?P&lt;week&gt;[0-9]+)/$&#39;</span><span class="p">,</span>
        <span class="n">ArticleWeekArchiveView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span>
        <span class="n">name</span><span class="o">=</span><span class="s">&quot;archive_week&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>Example myapp/article_archive_week.html</strong>:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Week <span class="cp">{{</span> <span class="nv">week</span><span class="o">|</span><span class="nf">date</span><span class="s1">:&#39;W&#39;</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">object_list</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">article.pub_date</span><span class="o">|</span><span class="nf">date</span><span class="s2">:&quot;F j, Y&quot;</span> <span class="cp">}}</span>: <span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="nt">&lt;p&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">previous_week</span> <span class="cp">%}</span>
        Previous Week: <span class="cp">{{</span> <span class="nv">previous_week</span><span class="o">|</span><span class="nf">date</span><span class="s2">:&quot;F Y&quot;</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">previous_week</span> <span class="k">and</span> <span class="nv">next_week</span> <span class="cp">%}</span>--<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">next_week</span> <span class="cp">%}</span>
        Next week: <span class="cp">{{</span> <span class="nv">next_week</span><span class="o">|</span><span class="nf">date</span><span class="s2">:&quot;F Y&quot;</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
<p>In this example, you are outputting the week number. The default
<code class="docutils literal"><span class="pre">week_format</span></code> in the <code class="docutils literal"><span class="pre">WeekArchiveView</span></code> uses  week format <code class="docutils literal"><span class="pre">'%U'</span></code>
which is based on the United States week system where the week begins on a
Sunday. The <code class="docutils literal"><span class="pre">'%W'</span></code> format uses the ISO week format and its week
begins on a Monday.  The <code class="docutils literal"><span class="pre">'%W'</span></code> format is the same in both the
<code class="xref py py-func docutils literal"><span class="pre">strftime()</span></code> and the <code class="docutils literal"><span class="pre">date</span></code>.</p>
<p>However, the <code class="docutils literal"><span class="pre">date</span></code> template filter does not have an equivalent
output format that supports the US based week system. The <code class="docutils literal"><span class="pre">date</span></code>
filter <code class="docutils literal"><span class="pre">'%U'</span></code> outputs the number of seconds since the Unix epoch.</p>
</dd></dl>

</div>
<div class="section" id="dayarchiveview">
<h3>DayArchiveView<a class="headerlink" href="#dayarchiveview" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.views.generic.dates.DayArchiveView">
<em class="property">class </em><code class="descclassname">django.views.generic.dates.</code><code class="descname">DayArchiveView</code><a class="headerlink" href="#django.views.generic.dates.DayArchiveView" title="Permalink to this definition">¶</a></dt>
<dd><p>A day archive page showing all objects in a given day. Days in the future
throw a 404 error, regardless of whether any objects exist for future days,
unless you set <code class="docutils literal"><span class="pre">allow_future</span></code> to <code class="docutils literal"><span class="pre">True</span></code>.</p>
<p><strong>Context</strong></p>
<p>In addition to the context provided by
<code class="xref py py-class docutils literal"><span class="pre">MultipleObjectMixin</span></code> (via
<code class="xref py py-class docutils literal"><span class="pre">BaseDateListView</span></code>), the template&#8217;s
context will be:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">day</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the given day.</li>
<li><code class="docutils literal"><span class="pre">next_day</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the next day, according to
<code class="xref py py-attr docutils literal"><span class="pre">allow_empty</span></code> and
<code class="xref py py-attr docutils literal"><span class="pre">allow_future</span></code>.</li>
<li><code class="docutils literal"><span class="pre">previous_day</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the previous day, according to
<code class="xref py py-attr docutils literal"><span class="pre">allow_empty</span></code> and
<code class="xref py py-attr docutils literal"><span class="pre">allow_future</span></code>.</li>
<li><code class="docutils literal"><span class="pre">next_month</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the first day of the next month, according to
<code class="xref py py-attr docutils literal"><span class="pre">allow_empty</span></code> and
<code class="xref py py-attr docutils literal"><span class="pre">allow_future</span></code>.</li>
<li><code class="docutils literal"><span class="pre">previous_month</span></code>: A <code class="xref py py-class docutils literal"><span class="pre">date</span></code> object
representing the first day of the previous month, according to
<code class="xref py py-attr docutils literal"><span class="pre">allow_empty</span></code> and
<code class="xref py py-attr docutils literal"><span class="pre">allow_future</span></code>.</li>
</ul>
<p><strong>Notes</strong></p>
<ul class="simple">
<li>Uses a default <code class="docutils literal"><span class="pre">template_name_suffix</span></code> of <code class="docutils literal"><span class="pre">_archive_day</span></code>.</li>
</ul>
<p><strong>Example myapp/views.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic.dates</span> <span class="kn">import</span> <span class="n">DayArchiveView</span>

<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Article</span>

<span class="k">class</span> <span class="nc">ArticleDayArchiveView</span><span class="p">(</span><span class="n">DayArchiveView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">date_field</span> <span class="o">=</span> <span class="s">&quot;pub_date&quot;</span>
    <span class="n">make_object_list</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">allow_future</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p><strong>Example myapp/urls.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">myapp.views</span> <span class="kn">import</span> <span class="n">ArticleDayArchiveView</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c"># Example: /2012/nov/10/</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;year&gt;[0-9]{4})/(?P&lt;month&gt;[-\w]+)/(?P&lt;day&gt;[0-9]+)/$&#39;</span><span class="p">,</span>
        <span class="n">ArticleDayArchiveView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span>
        <span class="n">name</span><span class="o">=</span><span class="s">&quot;archive_day&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>Example myapp/article_archive_day.html</strong>:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">day</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">object_list</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">article.pub_date</span><span class="o">|</span><span class="nf">date</span><span class="s2">:&quot;F j, Y&quot;</span> <span class="cp">}}</span>: <span class="cp">{{</span> <span class="nv">article.title</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="nt">&lt;p&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">previous_day</span> <span class="cp">%}</span>
        Previous Day: <span class="cp">{{</span> <span class="nv">previous_day</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">previous_day</span> <span class="k">and</span> <span class="nv">next_day</span> <span class="cp">%}</span>--<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">next_day</span> <span class="cp">%}</span>
        Next Day: <span class="cp">{{</span> <span class="nv">next_day</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="nt">&lt;/p&gt;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="todayarchiveview">
<h3>TodayArchiveView<a class="headerlink" href="#todayarchiveview" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.views.generic.dates.TodayArchiveView">
<em class="property">class </em><code class="descclassname">django.views.generic.dates.</code><code class="descname">TodayArchiveView</code><a class="headerlink" href="#django.views.generic.dates.TodayArchiveView" title="Permalink to this definition">¶</a></dt>
<dd><p>A day archive page showing all objects for <em>today</em>. This is exactly the
same as <a class="reference internal" href="#django.views.generic.dates.DayArchiveView" title="django.views.generic.dates.DayArchiveView"><code class="xref py py-class docutils literal"><span class="pre">django.views.generic.dates.DayArchiveView</span></code></a>, except today&#8217;s
date is used instead of the <code class="docutils literal"><span class="pre">year</span></code>/<code class="docutils literal"><span class="pre">month</span></code>/<code class="docutils literal"><span class="pre">day</span></code> arguments.</p>
<p><strong>Notes</strong></p>
<ul class="simple">
<li>Uses a default <code class="docutils literal"><span class="pre">template_name_suffix</span></code> of <code class="docutils literal"><span class="pre">_archive_today</span></code>.</li>
</ul>
<p><strong>Example myapp/views.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic.dates</span> <span class="kn">import</span> <span class="n">TodayArchiveView</span>

<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Article</span>

<span class="k">class</span> <span class="nc">ArticleTodayArchiveView</span><span class="p">(</span><span class="n">TodayArchiveView</span><span class="p">):</span>
    <span class="n">queryset</span> <span class="o">=</span> <span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">date_field</span> <span class="o">=</span> <span class="s">&quot;pub_date&quot;</span>
    <span class="n">make_object_list</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">allow_future</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p><strong>Example myapp/urls.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>

<span class="kn">from</span> <span class="nn">myapp.views</span> <span class="kn">import</span> <span class="n">ArticleTodayArchiveView</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^today/$&#39;</span><span class="p">,</span>
        <span class="n">ArticleTodayArchiveView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span>
        <span class="n">name</span><span class="o">=</span><span class="s">&quot;archive_today&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition-where-is-the-example-template-for-todayarchiveview admonition">
<p class="first admonition-title">Where is the example template for <code class="docutils literal"><span class="pre">TodayArchiveView</span></code>?</p>
<p class="last">This view uses by default the same template as the
<a class="reference internal" href="#django.views.generic.dates.DayArchiveView" title="django.views.generic.dates.DayArchiveView"><code class="xref py py-class docutils literal"><span class="pre">DayArchiveView</span></code></a>, which is in the previous example. If you need
a different template, set the <code class="docutils literal"><span class="pre">template_name</span></code> attribute to be the
name of the new template.</p>
</div>
</dd></dl>

</div>
<div class="section" id="datedetailview">
<h3>DateDetailView<a class="headerlink" href="#datedetailview" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.views.generic.dates.DateDetailView">
<em class="property">class </em><code class="descclassname">django.views.generic.dates.</code><code class="descname">DateDetailView</code><a class="headerlink" href="#django.views.generic.dates.DateDetailView" title="Permalink to this definition">¶</a></dt>
<dd><p>A page representing an individual object. If the object has a date value in
the future, the view will throw a 404 error by default, unless you set
<code class="docutils literal"><span class="pre">allow_future</span></code> to <code class="docutils literal"><span class="pre">True</span></code>.</p>
<p><strong>Context</strong></p>
<ul class="simple">
<li>Includes the single object associated with the <code class="docutils literal"><span class="pre">model</span></code> specified in
the <code class="docutils literal"><span class="pre">DateDetailView</span></code>.</li>
</ul>
<p><strong>Notes</strong></p>
<ul class="simple">
<li>Uses a default <code class="docutils literal"><span class="pre">template_name_suffix</span></code> of <code class="docutils literal"><span class="pre">_detail</span></code>.</li>
</ul>
<p><strong>Example myapp/urls.py</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.views.generic.dates</span> <span class="kn">import</span> <span class="n">DateDetailView</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^(?P&lt;year&gt;[0-9]+)/(?P&lt;month&gt;[-\w]+)/(?P&lt;day&gt;[0-9]+)/(?P&lt;pk&gt;[0-9]+)/$&#39;</span><span class="p">,</span>
        <span class="n">DateDetailView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">Article</span><span class="p">,</span> <span class="n">date_field</span><span class="o">=</span><span class="s">&quot;pub_date&quot;</span><span class="p">),</span>
        <span class="n">name</span><span class="o">=</span><span class="s">&quot;archive_date_detail&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>Example myapp/article_detail.html</strong>:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">object.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="form-handling-with-class-based-views">
<h2>Form handling with class-based views<a class="headerlink" href="#form-handling-with-class-based-views" title="Permalink to this headline">¶</a></h2>
<p>Form processing generally has 3 paths:</p>
<ul class="simple">
<li>Initial GET (blank or prepopulated form)</li>
<li>POST with invalid data (typically redisplay form with errors)</li>
<li>POST with valid data (process the data and typically redirect)</li>
</ul>
<p>Implementing this yourself often results in a lot of repeated boilerplate code
(see Using a form in a view). To help avoid
this, Django provides a collection of generic class-based views for form
processing.</p>
<div class="section" id="basic-forms">
<h3>Basic Forms<a class="headerlink" href="#basic-forms" title="Permalink to this headline">¶</a></h3>
<p>Given a simple contact form:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># forms.py</span>

<span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>

<span class="k">class</span> <span class="nc">ContactForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
   <span class="n">name</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
   <span class="n">message</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">Textarea</span><span class="p">)</span>

   <span class="k">def</span> <span class="nf">send_email</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="c"># send email using the self.cleaned_data dictionary</span>
       <span class="k">pass</span>
</pre></div>
</div>
<p>The view can be constructed using a <code class="docutils literal"><span class="pre">FormView</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># views.py</span>

<span class="kn">from</span> <span class="nn">myapp.forms</span> <span class="kn">import</span> <span class="n">ContactForm</span>
<span class="kn">from</span> <span class="nn">django.views.generic.edit</span> <span class="kn">import</span> <span class="n">FormView</span>

<span class="k">class</span> <span class="nc">ContactView</span><span class="p">(</span><span class="n">FormView</span><span class="p">):</span>
   <span class="n">template_name</span> <span class="o">=</span> <span class="s">&#39;contact.html&#39;</span>
   <span class="n">form_class</span> <span class="o">=</span> <span class="n">ContactForm</span>
   <span class="n">success_url</span> <span class="o">=</span> <span class="s">&#39;/thanks/&#39;</span>

   <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
       <span class="c"># This method is called when valid form data has been POSTed.</span>
       <span class="c"># It should return an HttpResponse.</span>
       <span class="n">form</span><span class="o">.</span><span class="n">send_email</span><span class="p">()</span>
       <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ContactView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
</pre></div>
</div>
<p>Notes:</p>
<ul class="simple">
<li>FormView inherits
<code class="xref py py-class docutils literal"><span class="pre">TemplateResponseMixin</span></code> so
<code class="xref py py-attr docutils literal"><span class="pre">template_name</span></code>
can be used here.</li>
<li>The default implementation for
<code class="xref py py-meth docutils literal"><span class="pre">form_valid()</span></code> simply
redirects to the <code class="xref py py-attr docutils literal"><span class="pre">success_url</span></code>.</li>
</ul>
</div>
<div class="section" id="model-forms">
<h3>Model Forms<a class="headerlink" href="#model-forms" title="Permalink to this headline">¶</a></h3>
<p>Generic views really shine when working with models.  These generic
views will automatically create a <code class="xref py py-class docutils literal"><span class="pre">ModelForm</span></code>, so long as
they can work out which model class to use:</p>
<ul class="simple">
<li>If the <code class="xref py py-attr docutils literal"><span class="pre">model</span></code> attribute is
given, that model class will be used.</li>
<li>If <code class="xref py py-meth docutils literal"><span class="pre">get_object()</span></code>
returns an object, the class of that object will be used.</li>
<li>If a <code class="xref py py-attr docutils literal"><span class="pre">queryset</span></code> is
given, the model for that queryset will be used.</li>
</ul>
<p>Model form views provide a
<code class="xref py py-meth docutils literal"><span class="pre">form_valid()</span></code> implementation
that saves the model automatically.  You can override this if you have any
special requirements; see below for examples.</p>
<p>You don&#8217;t even need to provide a <code class="docutils literal"><span class="pre">success_url</span></code> for
<code class="xref py py-class docutils literal"><span class="pre">CreateView</span></code> or
<code class="xref py py-class docutils literal"><span class="pre">UpdateView</span></code> - they will use
<code class="xref py py-meth docutils literal"><span class="pre">get_absolute_url()</span></code> on the model object if available.</p>
<p>If you want to use a custom <code class="xref py py-class docutils literal"><span class="pre">ModelForm</span></code> (for instance to
add extra validation) simply set
<code class="xref py py-attr docutils literal"><span class="pre">form_class</span></code> on your view.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When specifying a custom form class, you must still specify the model,
even though the <code class="xref py py-attr docutils literal"><span class="pre">form_class</span></code> may
be a <code class="xref py py-class docutils literal"><span class="pre">ModelForm</span></code>.</p>
</div>
<p>First we need to add <code class="xref py py-meth docutils literal"><span class="pre">get_absolute_url()</span></code> to our
<code class="docutils literal"><span class="pre">Author</span></code> class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># models.py</span>

<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;author-detail&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;pk&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>
</pre></div>
</div>
<p>Then we can use <code class="xref py py-class docutils literal"><span class="pre">CreateView</span></code> and friends to do the actual
work. Notice how we&#8217;re just configuring the generic class-based views
here; we don&#8217;t have to write any logic ourselves:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># views.py</span>

<span class="kn">from</span> <span class="nn">django.views.generic.edit</span> <span class="kn">import</span> <span class="n">CreateView</span><span class="p">,</span> <span class="n">UpdateView</span><span class="p">,</span> <span class="n">DeleteView</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse_lazy</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Author</span>

<span class="k">class</span> <span class="nc">AuthorCreate</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">AuthorUpdate</span><span class="p">(</span><span class="n">UpdateView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">AuthorDelete</span><span class="p">(</span><span class="n">DeleteView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>
    <span class="n">success_url</span> <span class="o">=</span> <span class="n">reverse_lazy</span><span class="p">(</span><span class="s">&#39;author-list&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We have to use <code class="xref py py-func docutils literal"><span class="pre">reverse_lazy()</span></code> here, not
just <code class="docutils literal"><span class="pre">reverse</span></code> as the urls are not loaded when the file is imported.</p>
</div>
<p>The <code class="docutils literal"><span class="pre">fields</span></code> attribute works the same way as the <code class="docutils literal"><span class="pre">fields</span></code> attribute on the
inner <code class="docutils literal"><span class="pre">Meta</span></code> class on <code class="xref py py-class docutils literal"><span class="pre">ModelForm</span></code>. Unless you define the
form class in another way, the attribute is required and the view will raise
an <code class="xref py py-exc docutils literal"><span class="pre">ImproperlyConfigured</span></code> exception if it&#8217;s not.</p>
<p>If you specify both the <code class="xref py py-attr docutils literal"><span class="pre">fields</span></code>
and <code class="xref py py-attr docutils literal"><span class="pre">form_class</span></code> attributes, an
<code class="xref py py-exc docutils literal"><span class="pre">ImproperlyConfigured</span></code> exception will be raised.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.8: </span>Omitting the <code class="docutils literal"><span class="pre">fields</span></code> attribute was previously allowed and resulted in a
form with all of the model&#8217;s fields.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.8: </span>Previously if both <code class="docutils literal"><span class="pre">fields</span></code> and <code class="docutils literal"><span class="pre">form_class</span></code> were specified,
<code class="docutils literal"><span class="pre">fields</span></code> was silently ignored.</p>
</div>
<p>Finally, we hook these new views into the URLconf:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># urls.py</span>

<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">myapp.views</span> <span class="kn">import</span> <span class="n">AuthorCreate</span><span class="p">,</span> <span class="n">AuthorUpdate</span><span class="p">,</span> <span class="n">AuthorDelete</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c"># ...</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;author/add/$&#39;</span><span class="p">,</span> <span class="n">AuthorCreate</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;author_add&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;author/(?P&lt;pk&gt;[0-9]+)/$&#39;</span><span class="p">,</span> <span class="n">AuthorUpdate</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;author_update&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;author/(?P&lt;pk&gt;[0-9]+)/delete/$&#39;</span><span class="p">,</span> <span class="n">AuthorDelete</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;author_delete&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>These views inherit
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectTemplateResponseMixin</span></code>
which uses
<code class="xref py py-attr docutils literal"><span class="pre">template_name_suffix</span></code>
to construct the
<code class="xref py py-attr docutils literal"><span class="pre">template_name</span></code>
based on the model.</p>
<p>In this example:</p>
<ul class="simple">
<li><code class="xref py py-class docutils literal"><span class="pre">CreateView</span></code> and <code class="xref py py-class docutils literal"><span class="pre">UpdateView</span></code> use <code class="docutils literal"><span class="pre">myapp/author_form.html</span></code></li>
<li><code class="xref py py-class docutils literal"><span class="pre">DeleteView</span></code> uses <code class="docutils literal"><span class="pre">myapp/author_confirm_delete.html</span></code></li>
</ul>
<p class="last">If you wish to have separate templates for <code class="xref py py-class docutils literal"><span class="pre">CreateView</span></code> and
<code class="xref py py-class docutils literal"><span class="pre">UpdateView</span></code>, you can set either
<code class="xref py py-attr docutils literal"><span class="pre">template_name</span></code> or
<code class="xref py py-attr docutils literal"><span class="pre">template_name_suffix</span></code>
on your view class.</p>
</div>
</div>
<div class="section" id="models-and-request-user">
<h3>Models and request.user<a class="headerlink" href="#models-and-request-user" title="Permalink to this headline">¶</a></h3>
<p>To track the user that created an object using a <code class="xref py py-class docutils literal"><span class="pre">CreateView</span></code>,
you can use a custom <code class="xref py py-class docutils literal"><span class="pre">ModelForm</span></code> to do this. First, add
the foreign key relation to the model:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># models.py</span>

<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>

    <span class="c"># ...</span>
</pre></div>
</div>
<p>In the view, ensure that you don&#8217;t include <code class="docutils literal"><span class="pre">created_by</span></code> in the list of fields
to edit, and override
<code class="xref py py-meth docutils literal"><span class="pre">form_valid()</span></code> to add the user:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># views.py</span>

<span class="kn">from</span> <span class="nn">django.views.generic.edit</span> <span class="kn">import</span> <span class="n">CreateView</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Author</span>

<span class="k">class</span> <span class="nc">AuthorCreate</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="n">form</span><span class="o">.</span><span class="n">instance</span><span class="o">.</span><span class="n">created_by</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">AuthorCreate</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that you&#8217;ll need to decorate this
view using
<a class="reference internal" href="chapter_11.html#django.contrib.auth.decorators.login_required" title="django.contrib.auth.decorators.login_required"><code class="xref py py-func docutils literal"><span class="pre">login_required()</span></code></a>, or
alternatively handle unauthorized users in the
<code class="xref py py-meth docutils literal"><span class="pre">form_valid()</span></code>.</p>
</div>
<div class="section" id="ajax-example">
<h3>AJAX example<a class="headerlink" href="#ajax-example" title="Permalink to this headline">¶</a></h3>
<p>Here is a simple example showing how you might go about implementing a form that
works for AJAX requests as well as &#8216;normal&#8217; form POSTs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">JsonResponse</span>
<span class="kn">from</span> <span class="nn">django.views.generic.edit</span> <span class="kn">import</span> <span class="n">CreateView</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Author</span>

<span class="k">class</span> <span class="nc">AjaxableResponseMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mixin to add AJAX support to a form.</span>
<span class="sd">    Must be used with an object-based FormView (e.g. CreateView)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">form_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">AjaxableResponseMixin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">form_invalid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">form</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span>

    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="c"># We make sure to call the parent&#39;s form_valid() method because</span>
        <span class="c"># it might do some processing (in the case of CreateView, it will</span>
        <span class="c"># call form.save() for example).</span>
        <span class="n">response</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">AjaxableResponseMixin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">():</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s">&#39;pk&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span>

<span class="k">class</span> <span class="nc">AuthorCreate</span><span class="p">(</span><span class="n">AjaxableResponseMixin</span><span class="p">,</span> <span class="n">CreateView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="using-mixins-with-class-based-views">
<h2>Using mixins with class-based views<a class="headerlink" href="#using-mixins-with-class-based-views" title="Permalink to this headline">¶</a></h2>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">This is an advanced topic. A working knowledge of Django&#8217;s
class-based views is advised before exploring these
techniques.</p>
</div>
<p>Django&#8217;s built-in class-based views provide a lot of functionality,
but some of it you may want to use separately. For instance, you may
want to write a view that renders a template to make the HTTP
response, but you can&#8217;t use
<code class="xref py py-class docutils literal"><span class="pre">TemplateView</span></code>; perhaps you need to
render a template only on <code class="docutils literal"><span class="pre">POST</span></code>, with <code class="docutils literal"><span class="pre">GET</span></code> doing something else
entirely. While you could use
<code class="xref py py-class docutils literal"><span class="pre">TemplateResponse</span></code> directly, this
will likely result in duplicate code.</p>
<p>For this reason, Django also provides a number of mixins that provide
more discrete functionality. Template rendering, for instance, is
encapsulated in the
<code class="xref py py-class docutils literal"><span class="pre">TemplateResponseMixin</span></code>. The Django
reference documentation contains full documentation of all the
mixins.</p>
</div>
<div class="section" id="context-and-template-responses">
<h2>Context and template responses<a class="headerlink" href="#context-and-template-responses" title="Permalink to this headline">¶</a></h2>
<p>Two central mixins are provided that help in providing a consistent
interface to working with templates in class-based views.</p>
<dl class="docutils">
<dt><code class="xref py py-class docutils literal"><span class="pre">TemplateResponseMixin</span></code></dt>
<dd><p class="first">Every built in view which returns a
<code class="xref py py-class docutils literal"><span class="pre">TemplateResponse</span></code> will call the
<code class="xref py py-meth docutils literal"><span class="pre">render_to_response()</span></code>
method that <code class="docutils literal"><span class="pre">TemplateResponseMixin</span></code> provides. Most of the time this
will be called for you (for instance, it is called by the <code class="docutils literal"><span class="pre">get()</span></code> method
implemented by both <code class="xref py py-class docutils literal"><span class="pre">TemplateView</span></code> and
<code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code>); similarly, it&#8217;s unlikely
that you&#8217;ll need to override it, although if you want your response to
return something not rendered via a Django template then you&#8217;ll want to do
it. For an example of this, see the JSONResponseMixin example
.</p>
<p class="last"><code class="docutils literal"><span class="pre">render_to_response()</span></code> itself calls
<code class="xref py py-meth docutils literal"><span class="pre">get_template_names()</span></code>,
which by default will just look up
<code class="xref py py-attr docutils literal"><span class="pre">template_name</span></code> on
the class-based view; two other mixins
(<code class="xref py py-class docutils literal"><span class="pre">SingleObjectTemplateResponseMixin</span></code>
and
<code class="xref py py-class docutils literal"><span class="pre">MultipleObjectTemplateResponseMixin</span></code>)
override this to provide more flexible defaults when dealing with actual
objects.</p>
</dd>
<dt><code class="xref py py-class docutils literal"><span class="pre">ContextMixin</span></code></dt>
<dd>Every built in view which needs context data, such as for rendering a
template (including <code class="docutils literal"><span class="pre">TemplateResponseMixin</span></code> above), should call
<code class="xref py py-meth docutils literal"><span class="pre">get_context_data()</span></code> passing
any data they want to ensure is in there as keyword arguments.
<code class="docutils literal"><span class="pre">get_context_data()</span></code> returns a dictionary; in <code class="docutils literal"><span class="pre">ContextMixin</span></code> it
simply returns its keyword arguments, but it is common to override this to
add more members to the dictionary.</dd>
</dl>
</div>
<div class="section" id="building-up-django-s-generic-class-based-views">
<h2>Building up Django&#8217;s generic class-based views<a class="headerlink" href="#building-up-django-s-generic-class-based-views" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s look at how two of Django&#8217;s generic class-based views are built
out of mixins providing discrete functionality. We&#8217;ll consider
<code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code>, which renders a
&#8220;detail&#8221; view of an object, and
<code class="xref py py-class docutils literal"><span class="pre">ListView</span></code>, which will render a list
of objects, typically from a queryset, and optionally paginate
them. This will introduce us to four mixins which between them provide
useful functionality when working with either a single Django object,
or multiple objects.</p>
<p>There are also mixins involved in the generic edit views
(<code class="xref py py-class docutils literal"><span class="pre">FormView</span></code>, and the model-specific
views <code class="xref py py-class docutils literal"><span class="pre">CreateView</span></code>,
<code class="xref py py-class docutils literal"><span class="pre">UpdateView</span></code> and
<code class="xref py py-class docutils literal"><span class="pre">DeleteView</span></code>), and in the
date-based generic views. These are
covered in the mixin reference
documentation.</p>
<div class="section" id="detailview-working-with-a-single-django-object">
<h3>DetailView: working with a single Django object<a class="headerlink" href="#detailview-working-with-a-single-django-object" title="Permalink to this headline">¶</a></h3>
<p>To show the detail of an object, we basically need to do two things:
we need to look up the object and then we need to make a
<code class="xref py py-class docutils literal"><span class="pre">TemplateResponse</span></code> with a suitable template,
and that object as context.</p>
<p>To get the object, <code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code>
relies on <code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code>,
which provides a
<code class="xref py py-meth docutils literal"><span class="pre">get_object()</span></code>
method that figures out the object based on the URL of the request (it
looks for <code class="docutils literal"><span class="pre">pk</span></code> and <code class="docutils literal"><span class="pre">slug</span></code> keyword arguments as declared in the
URLConf, and looks the object up either from the
<code class="xref py py-attr docutils literal"><span class="pre">model</span></code> attribute
on the view, or the
<code class="xref py py-attr docutils literal"><span class="pre">queryset</span></code>
attribute if that&#8217;s provided). <code class="docutils literal"><span class="pre">SingleObjectMixin</span></code> also overrides
<code class="xref py py-meth docutils literal"><span class="pre">get_context_data()</span></code>,
which is used across all Django&#8217;s built in class-based views to supply
context data for template renders.</p>
<p>To then make a <code class="xref py py-class docutils literal"><span class="pre">TemplateResponse</span></code>,
<code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code> uses
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectTemplateResponseMixin</span></code>,
which extends <code class="xref py py-class docutils literal"><span class="pre">TemplateResponseMixin</span></code>,
overriding
<code class="xref py py-meth docutils literal"><span class="pre">get_template_names()</span></code>
as discussed above. It actually provides a fairly sophisticated set of options,
but the main one that most people are going to use is
<code class="docutils literal"><span class="pre">&lt;app_label&gt;/&lt;model_name&gt;_detail.html</span></code>. The <code class="docutils literal"><span class="pre">_detail</span></code> part can be changed
by setting
<code class="xref py py-attr docutils literal"><span class="pre">template_name_suffix</span></code>
on a subclass to something else. (For instance, the generic edit
views use <code class="docutils literal"><span class="pre">_form</span></code> for create and update views, and
<code class="docutils literal"><span class="pre">_confirm_delete</span></code> for delete views.)</p>
</div>
<div class="section" id="listview-working-with-many-django-objects">
<h3>ListView: working with many Django objects<a class="headerlink" href="#listview-working-with-many-django-objects" title="Permalink to this headline">¶</a></h3>
<p>Lists of objects follow roughly the same pattern: we need a (possibly
paginated) list of objects, typically a
<code class="xref py py-class docutils literal"><span class="pre">QuerySet</span></code>, and then we need to make a
<code class="xref py py-class docutils literal"><span class="pre">TemplateResponse</span></code> with a suitable template
using that list of objects.</p>
<p>To get the objects, <code class="xref py py-class docutils literal"><span class="pre">ListView</span></code> uses
<code class="xref py py-class docutils literal"><span class="pre">MultipleObjectMixin</span></code>, which
provides both
<code class="xref py py-meth docutils literal"><span class="pre">get_queryset()</span></code>
and
<code class="xref py py-meth docutils literal"><span class="pre">paginate_queryset()</span></code>. Unlike
with <code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code>, there&#8217;s no need
to key off parts of the URL to figure out the queryset to work with, so the
default just uses the
<code class="xref py py-attr docutils literal"><span class="pre">queryset</span></code> or
<code class="xref py py-attr docutils literal"><span class="pre">model</span></code> attribute
on the view class. A common reason to override
<code class="xref py py-meth docutils literal"><span class="pre">get_queryset()</span></code>
here would be to dynamically vary the objects, such as depending on
the current user or to exclude posts in the future for a blog.</p>
<p><code class="xref py py-class docutils literal"><span class="pre">MultipleObjectMixin</span></code> also overrides
<code class="xref py py-meth docutils literal"><span class="pre">get_context_data()</span></code> to
include appropriate context variables for pagination (providing
dummies if pagination is disabled). It relies on <code class="docutils literal"><span class="pre">object_list</span></code> being
passed in as a keyword argument, which <code class="xref py py-class docutils literal"><span class="pre">ListView</span></code> arranges for
it.</p>
<p>To make a <code class="xref py py-class docutils literal"><span class="pre">TemplateResponse</span></code>,
<code class="xref py py-class docutils literal"><span class="pre">ListView</span></code> then uses
<code class="xref py py-class docutils literal"><span class="pre">MultipleObjectTemplateResponseMixin</span></code>;
as with <code class="xref py py-class docutils literal"><span class="pre">SingleObjectTemplateResponseMixin</span></code>
above, this overrides <code class="docutils literal"><span class="pre">get_template_names()</span></code> to provide <code class="xref py py-meth docutils literal"><span class="pre">a</span> <span class="pre">range</span> <span class="pre">of</span>
<span class="pre">options</span></code>,
with the most commonly-used being
<code class="docutils literal"><span class="pre">&lt;app_label&gt;/&lt;model_name&gt;_list.html</span></code>, with the <code class="docutils literal"><span class="pre">_list</span></code> part again
being taken from the
<code class="xref py py-attr docutils literal"><span class="pre">template_name_suffix</span></code>
attribute. (The date based generic views use suffixes such as <code class="docutils literal"><span class="pre">_archive</span></code>,
<code class="docutils literal"><span class="pre">_archive_year</span></code> and so on to use different templates for the various
specialized date-based list views.)</p>
</div>
</div>
<div class="section" id="using-django-s-class-based-view-mixins">
<h2>Using Django&#8217;s class-based view mixins<a class="headerlink" href="#using-django-s-class-based-view-mixins" title="Permalink to this headline">¶</a></h2>
<p>Now we&#8217;ve seen how Django&#8217;s generic class-based views use the provided
mixins, let&#8217;s look at other ways we can combine them. Of course we&#8217;re
still going to be combining them with either built-in class-based
views, or other generic class-based views, but there are a range of
rarer problems you can solve than are provided for by Django out of
the box.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Not all mixins can be used together, and not all generic class
based views can be used with all other mixins. Here we present a
few examples that do work; if you want to bring together other
functionality then you&#8217;ll have to consider interactions between
attributes and methods that overlap between the different classes
you&#8217;re using, and how <a class="reference external" href="https://www.python.org/download/releases/2.3/mro/">method resolution order</a> will affect which
versions of the methods will be called in what order.</p>
<p>The reference documentation for Django&#8217;s class-based
views and class-based view
mixins will help you in
understanding which attributes and methods are likely to cause
conflict between different classes and mixins.</p>
<p class="last">If in doubt, it&#8217;s often better to back off and base your work on
<code class="xref py py-class docutils literal"><span class="pre">View</span></code> or <code class="xref py py-class docutils literal"><span class="pre">TemplateView</span></code>, perhaps with
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code> and
<code class="xref py py-class docutils literal"><span class="pre">MultipleObjectMixin</span></code>. Although you
will probably end up writing more code, it is more likely to be clearly
understandable to someone else coming to it later, and with fewer
interactions to worry about you will save yourself some thinking. (Of
course, you can always dip into Django&#8217;s implementation of the generic
class based views for inspiration on how to tackle problems.)</p>
</div>
<div class="section" id="using-singleobjectmixin-with-view">
<h3>Using SingleObjectMixin with View<a class="headerlink" href="#using-singleobjectmixin-with-view" title="Permalink to this headline">¶</a></h3>
<p>If we want to write a simple class-based view that responds only to
<code class="docutils literal"><span class="pre">POST</span></code>, we&#8217;ll subclass <code class="xref py py-class docutils literal"><span class="pre">View</span></code> and
write a <code class="docutils literal"><span class="pre">post()</span></code> method in the subclass. However if we want our
processing to work on a particular object, identified from the URL,
we&#8217;ll want the functionality provided by
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code>.</p>
<p>We&#8217;ll demonstrate this with the <code class="docutils literal"><span class="pre">Author</span></code> model we used in the
generic class-based views introduction.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># views.py</span>

<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponseForbidden</span><span class="p">,</span> <span class="n">HttpResponseRedirect</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">View</span>
<span class="kn">from</span> <span class="nn">django.views.generic.detail</span> <span class="kn">import</span> <span class="n">SingleObjectMixin</span>
<span class="kn">from</span> <span class="nn">books.models</span> <span class="kn">import</span> <span class="n">Author</span>

<span class="k">class</span> <span class="nc">RecordInterest</span><span class="p">(</span><span class="n">SingleObjectMixin</span><span class="p">,</span> <span class="n">View</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Records the current user&#39;s interest in an author.&quot;&quot;&quot;</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> \<span class="o">*</span><span class="n">args</span><span class="p">,</span> \<span class="o">*</span>\<span class="o">*</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">HttpResponseForbidden</span><span class="p">()</span>

        <span class="c"># Look up the author we&#39;re interested in.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span>
        <span class="c"># Actually record interest somehow here!</span>

        <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;author-detail&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;pk&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">pk</span><span class="p">}))</span>
</pre></div>
</div>
<p>In practice you&#8217;d probably want to record the interest in a key-value
store rather than in a relational database, so we&#8217;ve left that bit
out. The only bit of the view that needs to worry about using
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code> is where we want to
look up the author we&#8217;re interested in, which it just does with a simple call
to <code class="docutils literal"><span class="pre">self.get_object()</span></code>. Everything else is taken care of for us by the
mixin.</p>
<p>We can hook this into our URLs easily enough:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># urls.py</span>

<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">books.views</span> <span class="kn">import</span> <span class="n">RecordInterest</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c">#...</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^author/(?P&lt;pk&gt;[0-9]+)/interest/$&#39;</span><span class="p">,</span> <span class="n">RecordInterest</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;author-interest&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Note the <code class="docutils literal"><span class="pre">pk</span></code> named group, which
<code class="xref py py-meth docutils literal"><span class="pre">get_object()</span></code> uses
to look up the <code class="docutils literal"><span class="pre">Author</span></code> instance. You could also use a slug, or
any of the other features of
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code>.</p>
</div>
<div class="section" id="using-singleobjectmixin-with-listview">
<h3>Using SingleObjectMixin with ListView<a class="headerlink" href="#using-singleobjectmixin-with-listview" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-class docutils literal"><span class="pre">ListView</span></code> provides built-in
pagination, but you might want to paginate a list of objects that are
all linked (by a foreign key) to another object. In our publishing
example, you might want to paginate through all the books by a
particular publisher.</p>
<p>One way to do this is to combine <code class="xref py py-class docutils literal"><span class="pre">ListView</span></code> with
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code>, so that the queryset
for the paginated list of books can hang off the publisher found as the single
object. In order to do this, we need to have two different querysets:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">Book</span></code> queryset for use by <code class="xref py py-class docutils literal"><span class="pre">ListView</span></code></dt>
<dd>Since we have access to the <code class="docutils literal"><span class="pre">Publisher</span></code> whose books we want to list, we
simply override <code class="docutils literal"><span class="pre">get_queryset()</span></code> and use the <code class="docutils literal"><span class="pre">Publisher</span></code>&#8216;s
reverse foreign key manager.</dd>
<dt><code class="docutils literal"><span class="pre">Publisher</span></code> queryset for use in <code class="xref py py-meth docutils literal"><span class="pre">get_object()</span></code></dt>
<dd>We&#8217;ll rely on the default implementation of <code class="docutils literal"><span class="pre">get_object()</span></code> to fetch the
correct <code class="docutils literal"><span class="pre">Publisher</span></code> object.
However, we need to explicitly pass a <code class="docutils literal"><span class="pre">queryset</span></code> argument because
otherwise the default implementation of <code class="docutils literal"><span class="pre">get_object()</span></code> would call
<code class="docutils literal"><span class="pre">get_queryset()</span></code> which we have overridden to return <code class="docutils literal"><span class="pre">Book</span></code> objects
instead of <code class="docutils literal"><span class="pre">Publisher</span></code> ones.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We have to think carefully about <code class="docutils literal"><span class="pre">get_context_data()</span></code>.
Since both <code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code> and
<code class="xref py py-class docutils literal"><span class="pre">ListView</span></code> will
put things in the context data under the value of
<code class="docutils literal"><span class="pre">context_object_name</span></code> if it&#8217;s set, we&#8217;ll instead explicitly
ensure the <code class="docutils literal"><span class="pre">Publisher</span></code> is in the context data. <code class="xref py py-class docutils literal"><span class="pre">ListView</span></code>
will add in the suitable <code class="docutils literal"><span class="pre">page_obj</span></code> and <code class="docutils literal"><span class="pre">paginator</span></code> for us
providing we remember to call <code class="docutils literal"><span class="pre">super()</span></code>.</p>
</div>
<p>Now we can write a new <code class="docutils literal"><span class="pre">PublisherDetail</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">ListView</span>
<span class="kn">from</span> <span class="nn">django.views.generic.detail</span> <span class="kn">import</span> <span class="n">SingleObjectMixin</span>
<span class="kn">from</span> <span class="nn">books.models</span> <span class="kn">import</span> <span class="n">Publisher</span>

<span class="k">class</span> <span class="nc">PublisherDetail</span><span class="p">(</span><span class="n">SingleObjectMixin</span><span class="p">,</span> <span class="n">ListView</span><span class="p">):</span>
    <span class="n">paginate_by</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">&quot;books/publisher_detail.html&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="n">queryset</span><span class="o">=</span><span class="n">Publisher</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">PublisherDetail</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_context_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">context</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">PublisherDetail</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">context</span><span class="p">[</span><span class="s">&#39;publisher&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span>
        <span class="k">return</span> <span class="n">context</span>

    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">book_set</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
<p>Notice how we set <code class="docutils literal"><span class="pre">self.object</span></code> within <code class="docutils literal"><span class="pre">get()</span></code> so we
can use it again later in <code class="docutils literal"><span class="pre">get_context_data()</span></code> and <code class="docutils literal"><span class="pre">get_queryset()</span></code>.
If you don&#8217;t set <code class="docutils literal"><span class="pre">template_name</span></code>, the template will default to the normal
<code class="xref py py-class docutils literal"><span class="pre">ListView</span></code> choice, which in this case would be
<code class="docutils literal"><span class="pre">&quot;books/book_list.html&quot;</span></code> because it&#8217;s a list of books;
<code class="xref py py-class docutils literal"><span class="pre">ListView</span></code> knows nothing about
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code>, so it doesn&#8217;t have
any clue this view is anything to do with a <code class="docutils literal"><span class="pre">Publisher</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">paginate_by</span></code> is deliberately small in the example so you don&#8217;t
have to create lots of books to see the pagination working! Here&#8217;s the
template you&#8217;d want to use:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;base.html&quot;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="nt">&lt;h2&gt;</span>Publisher <span class="cp">{{</span> <span class="nv">publisher.name</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>

    <span class="nt">&lt;ol&gt;</span>
      <span class="cp">{%</span> <span class="k">for</span> <span class="nv">book</span> <span class="k">in</span> <span class="nv">page_obj</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">book.title</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
      <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/ol&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;pagination&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;step-links&quot;</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">if</span> <span class="nv">page_obj.has_previous</span> <span class="cp">%}</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=</span><span class="cp">{{</span> <span class="nv">page_obj.previous_page_number</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>previous<span class="nt">&lt;/a&gt;</span>
            <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

            <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;current&quot;</span><span class="nt">&gt;</span>
                Page <span class="cp">{{</span> <span class="nv">page_obj.number</span> <span class="cp">}}</span> of <span class="cp">{{</span> <span class="nv">paginator.num_pages</span> <span class="cp">}}</span>.
            <span class="nt">&lt;/span&gt;</span>

            <span class="cp">{%</span> <span class="k">if</span> <span class="nv">page_obj.has_next</span> <span class="cp">%}</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;?page=</span><span class="cp">{{</span> <span class="nv">page_obj.next_page_number</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>next<span class="nt">&lt;/a&gt;</span>
            <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
        <span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="avoid-anything-more-complex">
<h2>Avoid anything more complex<a class="headerlink" href="#avoid-anything-more-complex" title="Permalink to this headline">¶</a></h2>
<p>Generally you can use
<code class="xref py py-class docutils literal"><span class="pre">TemplateResponseMixin</span></code> and
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code> when you need
their functionality. As shown above, with a bit of care you can even
combine <code class="docutils literal"><span class="pre">SingleObjectMixin</span></code> with
<code class="xref py py-class docutils literal"><span class="pre">ListView</span></code>. However things get
increasingly complex as you try to do so, and a good rule of thumb is:</p>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Each of your views should use only mixins or views from one of the
groups of generic class-based views: detail,
list editing and
date. For example it&#8217;s fine to combine
<code class="xref py py-class docutils literal"><span class="pre">TemplateView</span></code> (built in view) with
<code class="xref py py-class docutils literal"><span class="pre">MultipleObjectMixin</span></code> (generic list), but
you&#8217;re likely to have problems combining <code class="docutils literal"><span class="pre">SingleObjectMixin</span></code> (generic
detail) with <code class="docutils literal"><span class="pre">MultipleObjectMixin</span></code> (generic list).</p>
</div>
<p>To show what happens when you try to get more sophisticated, we show
an example that sacrifices readability and maintainability when there
is a simpler solution. First, let&#8217;s look at a naive attempt to combine
<code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code> with
<code class="xref py py-class docutils literal"><span class="pre">FormMixin</span></code> to enable use to
<code class="docutils literal"><span class="pre">POST</span></code> a Django <code class="xref py py-class docutils literal"><span class="pre">Form</span></code> to the same URL as we&#8217;re
displaying an object using <code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code>.</p>
<div class="section" id="using-formmixin-with-detailview">
<h3>Using FormMixin with DetailView<a class="headerlink" href="#using-formmixin-with-detailview" title="Permalink to this headline">¶</a></h3>
<p>Think back to our earlier example of using <code class="xref py py-class docutils literal"><span class="pre">View</span></code> and
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code> together. We were
recording a user&#8217;s interest in a particular author; say now that we want to
let them leave a message saying why they like them. Again, let&#8217;s assume we&#8217;re
not going to store this in a relational database but instead in
something more esoteric that we won&#8217;t worry about here.</p>
<p>At this point it&#8217;s natural to reach for a <code class="xref py py-class docutils literal"><span class="pre">Form</span></code> to
encapsulate the information sent from the user&#8217;s browser to Django. Say also
that we&#8217;re heavily invested in <a class="reference external" href="http://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>, so we want to use the same URL for
displaying the author as for capturing the message from the
user. Let&#8217;s rewrite our <code class="docutils literal"><span class="pre">AuthorDetailView</span></code> to do that.</p>
<p>We&#8217;ll keep the <code class="docutils literal"><span class="pre">GET</span></code> handling from <code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code>, although
we&#8217;ll have to add a <code class="xref py py-class docutils literal"><span class="pre">Form</span></code> into the context data so we can
render it in the template. We&#8217;ll also want to pull in form processing
from <code class="xref py py-class docutils literal"><span class="pre">FormMixin</span></code>, and write a bit of
code so that on <code class="docutils literal"><span class="pre">POST</span></code> the form gets called appropriately.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We use <code class="xref py py-class docutils literal"><span class="pre">FormMixin</span></code> and implement
<code class="docutils literal"><span class="pre">post()</span></code> ourselves rather than try to mix <code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code> with
<code class="xref py py-class docutils literal"><span class="pre">FormView</span></code> (which provides a suitable <code class="docutils literal"><span class="pre">post()</span></code> already) because
both of the views implement <code class="docutils literal"><span class="pre">get()</span></code>, and things would get much more
confusing.</p>
</div>
<p>Our new <code class="docutils literal"><span class="pre">AuthorDetail</span></code> looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># CAUTION: you almost certainly do not want to do this.</span>
<span class="c"># It is provided as part of a discussion of problems you can</span>
<span class="c"># run into when combining different generic class-based view</span>
<span class="c"># functionality that is not designed to be used together.</span>

<span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponseForbidden</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">DetailView</span>
<span class="kn">from</span> <span class="nn">django.views.generic.edit</span> <span class="kn">import</span> <span class="n">FormMixin</span>
<span class="kn">from</span> <span class="nn">books.models</span> <span class="kn">import</span> <span class="n">Author</span>

<span class="k">class</span> <span class="nc">AuthorInterestForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">AuthorDetail</span><span class="p">(</span><span class="n">FormMixin</span><span class="p">,</span> <span class="n">DetailView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>
    <span class="n">form_class</span> <span class="o">=</span> <span class="n">AuthorInterestForm</span>

    <span class="k">def</span> <span class="nf">get_success_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;author-detail&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;pk&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">get_context_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">context</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">AuthorDetail</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">context</span><span class="p">[</span><span class="s">&#39;form&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">context</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">HttpResponseForbidden</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span>
        <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_invalid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="c"># Here, we would record the user&#39;s interest using the message</span>
        <span class="c"># passed in form.cleaned_data[&#39;message&#39;]</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">AuthorDetail</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">get_success_url()</span></code> is just providing somewhere to redirect to,
which gets used in the default implementation of
<code class="docutils literal"><span class="pre">form_valid()</span></code>. We have to provide our own <code class="docutils literal"><span class="pre">post()</span></code> as
noted earlier, and override <code class="docutils literal"><span class="pre">get_context_data()</span></code> to make the
<code class="xref py py-class docutils literal"><span class="pre">Form</span></code> available in the context data.</p>
</div>
<div class="section" id="a-better-solution">
<h3>A better solution<a class="headerlink" href="#a-better-solution" title="Permalink to this headline">¶</a></h3>
<p>It should be obvious that the number of subtle interactions between
<code class="xref py py-class docutils literal"><span class="pre">FormMixin</span></code> and <code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code> is
already testing our ability to manage things. It&#8217;s unlikely you&#8217;d want to
write this kind of class yourself.</p>
<p>In this case, it would be fairly easy to just write the <code class="docutils literal"><span class="pre">post()</span></code>
method yourself, keeping <code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code> as the only generic
functionality, although writing <code class="xref py py-class docutils literal"><span class="pre">Form</span></code> handling code
involves a lot of duplication.</p>
<p>Alternatively, it would still be easier than the above approach to
have a separate view for processing the form, which could use
<code class="xref py py-class docutils literal"><span class="pre">FormView</span></code> distinct from
<code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code> without concerns.</p>
</div>
<div class="section" id="an-alternative-better-solution">
<h3>An alternative better solution<a class="headerlink" href="#an-alternative-better-solution" title="Permalink to this headline">¶</a></h3>
<p>What we&#8217;re really trying to do here is to use two different class
based views from the same URL. So why not do just that? We have a very
clear division here: <code class="docutils literal"><span class="pre">GET</span></code> requests should get the
<code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code> (with the <code class="xref py py-class docutils literal"><span class="pre">Form</span></code> added to the context
data), and <code class="docutils literal"><span class="pre">POST</span></code> requests should get the <code class="xref py py-class docutils literal"><span class="pre">FormView</span></code>. Let&#8217;s
set up those views first.</p>
<p>The <code class="docutils literal"><span class="pre">AuthorDisplay</span></code> view is almost the same as when we
first introduced AuthorDetail&lt;generic-views-extra-work&gt;`; we have to
write our own <code class="docutils literal"><span class="pre">get_context_data()</span></code> to make the
<code class="docutils literal"><span class="pre">AuthorInterestForm</span></code> available to the template. We&#8217;ll skip the
<code class="docutils literal"><span class="pre">get_object()</span></code> override from before for clarity:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">DetailView</span>
<span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">books.models</span> <span class="kn">import</span> <span class="n">Author</span>

<span class="k">class</span> <span class="nc">AuthorInterestForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">AuthorDisplay</span><span class="p">(</span><span class="n">DetailView</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>

    <span class="k">def</span> <span class="nf">get_context_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">context</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">AuthorDisplay</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">context</span><span class="p">[</span><span class="s">&#39;form&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">AuthorInterestForm</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">context</span>
</pre></div>
</div>
<p>Then the <code class="docutils literal"><span class="pre">AuthorInterest</span></code> is a simple <code class="xref py py-class docutils literal"><span class="pre">FormView</span></code>, but we
have to bring in <code class="xref py py-class docutils literal"><span class="pre">SingleObjectMixin</span></code> so we
can find the author we&#8217;re talking about, and we have to remember to set
<code class="docutils literal"><span class="pre">template_name</span></code> to ensure that form errors will render the same
template as <code class="docutils literal"><span class="pre">AuthorDisplay</span></code> is using on <code class="docutils literal"><span class="pre">GET</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponseForbidden</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">FormView</span>
<span class="kn">from</span> <span class="nn">django.views.generic.detail</span> <span class="kn">import</span> <span class="n">SingleObjectMixin</span>

<span class="k">class</span> <span class="nc">AuthorInterest</span><span class="p">(</span><span class="n">SingleObjectMixin</span><span class="p">,</span> <span class="n">FormView</span><span class="p">):</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s">&#39;books/author_detail.html&#39;</span>
    <span class="n">form_class</span> <span class="o">=</span> <span class="n">AuthorInterestForm</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Author</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">HttpResponseForbidden</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">AuthorInterest</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_success_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;author-detail&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;pk&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>
</pre></div>
</div>
<p>Finally we bring this together in a new <code class="docutils literal"><span class="pre">AuthorDetail</span></code> view. We
already know that calling <code class="xref py py-meth docutils literal"><span class="pre">as_view()</span></code> on
a class-based view gives us something that behaves exactly like a function
based view, so we can do that at the point we choose between the two subviews.</p>
<p>You can of course pass through keyword arguments to
<code class="xref py py-meth docutils literal"><span class="pre">as_view()</span></code> in the same way you
would in your URLconf, such as if you wanted the <code class="docutils literal"><span class="pre">AuthorInterest</span></code> behavior
to also appear at another URL but using a different template:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">View</span>

<span class="k">class</span> <span class="nc">AuthorDetail</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">AuthorDisplay</span><span class="o">.</span><span class="n">as_view</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">view</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">AuthorInterest</span><span class="o">.</span><span class="n">as_view</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">view</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>This approach can also be used with any other generic class-based
views or your own class-based views inheriting directly from
<code class="xref py py-class docutils literal"><span class="pre">View</span></code> or <code class="xref py py-class docutils literal"><span class="pre">TemplateView</span></code>, as it keeps the different
views as separate as possible.</p>
</div>
</div>
<div class="section" id="more-than-just-html">
<span id="jsonresponsemixin-example"></span><h2>More than just HTML<a class="headerlink" href="#more-than-just-html" title="Permalink to this headline">¶</a></h2>
<p>Where class based views shine is when you want to do the same thing many times.
Suppose you&#8217;re writing an API, and every view should return JSON instead of
rendered HTML.</p>
<p>We can create a mixin class to use in all of our views, handling the
conversion to JSON once.</p>
<p>For example, a simple JSON mixin might look something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">JsonResponse</span>

<span class="k">class</span> <span class="nc">JSONResponseMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A mixin that can be used to render a JSON response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">render_to_json_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a JSON response, transforming &#39;context&#39; to make the payload.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">context</span><span class="p">),</span>
            <span class="o">**</span><span class="n">response_kwargs</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an object that will be serialized as JSON by json.dumps().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Note: This is *EXTREMELY* naive; in reality, you&#39;ll need</span>
        <span class="c"># to do much more complex handling to ensure that arbitrary</span>
        <span class="c"># objects -- such as Django model instances or querysets</span>
        <span class="c"># -- can be serialized as JSON.</span>
        <span class="k">return</span> <span class="n">context</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Check out the serialization documentation for more
information on how to correctly transform Django models and querysets into
JSON.</p>
</div>
<p>This mixin provides a <code class="docutils literal"><span class="pre">render_to_json_response()</span></code> method with the same signature
as <code class="xref py py-func docutils literal"><span class="pre">render_to_response()</span></code>.
To use it, we simply need to mix it into a <code class="docutils literal"><span class="pre">TemplateView</span></code> for example,
and override <code class="docutils literal"><span class="pre">render_to_response()</span></code> to call <code class="docutils literal"><span class="pre">render_to_json_response()</span></code> instead:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">TemplateView</span>

<span class="k">class</span> <span class="nc">JSONView</span><span class="p">(</span><span class="n">JSONResponseMixin</span><span class="p">,</span> <span class="n">TemplateView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_json_response</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Equally we could use our mixin with one of the generic views. We can make our
own version of <code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code> by mixing
<code class="docutils literal"><span class="pre">JSONResponseMixin</span></code> with the
<code class="docutils literal"><span class="pre">django.views.generic.detail.BaseDetailView</span></code> &#8211; (the
<code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code> before template
rendering behavior has been mixed in):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic.detail</span> <span class="kn">import</span> <span class="n">BaseDetailView</span>

<span class="k">class</span> <span class="nc">JSONDetailView</span><span class="p">(</span><span class="n">JSONResponseMixin</span><span class="p">,</span> <span class="n">BaseDetailView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_json_response</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>This view can then be deployed in the same way as any other
<code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code>, with exactly the
same behavior &#8211; except for the format of the response.</p>
<p>If you want to be really adventurous, you could even mix a
<code class="xref py py-class docutils literal"><span class="pre">DetailView</span></code> subclass that is able
to return <em>both</em> HTML and JSON content, depending on some property of
the HTTP request, such as a query argument or a HTTP header. Just mix
in both the <code class="docutils literal"><span class="pre">JSONResponseMixin</span></code> and a
<code class="xref py py-class docutils literal"><span class="pre">SingleObjectTemplateResponseMixin</span></code>,
and override the implementation of
<code class="xref py py-func docutils literal"><span class="pre">render_to_response()</span></code>
to defer to the appropriate rendering method depending on the type of response
that the user requested:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.views.generic.detail</span> <span class="kn">import</span> <span class="n">SingleObjectTemplateResponseMixin</span>

<span class="k">class</span> <span class="nc">HybridDetailView</span><span class="p">(</span><span class="n">JSONResponseMixin</span><span class="p">,</span> <span class="n">SingleObjectTemplateResponseMixin</span><span class="p">,</span> <span class="n">BaseDetailView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="c"># Look for a &#39;format=json&#39; GET argument</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;format&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;json&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_json_response</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">HybridDetailView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p>Because of the way that Python resolves method overloading, the call to
<code class="docutils literal"><span class="pre">super(HybridDetailView,</span> <span class="pre">self).render_to_response(context)</span></code> ends up
calling the
<code class="xref py py-meth docutils literal"><span class="pre">render_to_response()</span></code>
implementation of <code class="xref py py-class docutils literal"><span class="pre">TemplateResponseMixin</span></code>.</p>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="front_matter.html">Frontmatter</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction_django.html">Introduction to Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_01.html">Chapter 1: Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_02.html">Chapter 2: Views and URLconfs</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_03.html">Chapter 3: Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_04.html">Chapter 4: Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_05.html">Chapter 5: The Django Admin Site</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_06.html">Chapter 6: Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_07.html">Chapter 7: Advanced Views and URLconfs</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_08.html">Chapter 8: Advanced Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_09.html">Chapter 9: Advanced Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_10.html">Chapter 10: Generic Views</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_11.html">Chapter 11: User authentication in Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_12.html">Chapter 12 - testing in Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_13.html">Chapter 13: Deploying Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_14.html">Chapter 14 - How to write reusable apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_15.html">Chapter 15: Generating Non-HTML Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_16.html">Chapter 16 - Django sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_17.html">Chapter 17 - Django&#8217;s cache framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_18.html">Chapter 18 - Other core Django functionalities</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_19.html">Chapter 19 - Django Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_20.html">Chapter 20: Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_21.html">Chapter 21: Security in Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_22.html">How to install Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter_23.html">Chapter 23: Advanced database management</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix_A.html">Appendix A: Model Definition Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix_B.html">Appendix B: Database API Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Appendix C: Generic View Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#common-arguments-to-generic-views">Common Arguments to Generic Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-generic-views">&#8220;Simple&#8221; Generic Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#list-detail-generic-views">List/Detail Generic Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-django.views.generic.dates">Date-Based Generic Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#form-handling-with-class-based-views">Form handling with class-based views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-mixins-with-class-based-views">Using mixins with class-based views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#context-and-template-responses">Context and template responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-up-django-s-generic-class-based-views">Building up Django&#8217;s generic class-based views</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-django-s-class-based-view-mixins">Using Django&#8217;s class-based view mixins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#avoid-anything-more-complex">Avoid anything more complex</a></li>
<li class="toctree-l2"><a class="reference internal" href="#more-than-just-html">More than just HTML</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix_D.html">Appendix D: Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix_E.html">Appendix E: Built-in Template Tags and Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix_F.html">Appendix F: The django-admin Utility</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix_G.html">Appendix G: Request and Response Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License &amp; Copyright</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
            <p class="searchtip" style="font-size: 90%">
                Enter search terms or a module, class or function name.
            </p>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="appendix_B.html" title="Appendix B: Database API Reference"
              >previous</a> |
            <a href="appendix_D.html" title="Appendix D: Settings"
              >next</a> |
            <a href="py-modindex.html" title="Python Module Index"
              >modules</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/appendix_C.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Nigel George.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>